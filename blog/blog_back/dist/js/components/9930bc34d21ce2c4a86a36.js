webpackJsonp([9],{210:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(232),a=r(251),l=r(52),s=!1;var i,n=function(e){s||r(250)},m=Object(l.a)(o.a,a.a,a.b,!1,n,"data-v-3f727cb2",null);m.options.__file="src\\components\\article\\add_article.vue",(i=r(17)).install(r(1),!1),i.compatible&&(e.hot.accept(),e.hot.data?i.reload("data-v-3f727cb2",m.options):i.createRecord("data-v-3f727cb2",m.options),e.hot.dispose(function(e){s=!0})),t.default=m.exports},221:function(e,t,r){(e.exports=r(50)(!1)).push([e.i,"\nh3[data-v-3f727cb2] {\n    margin: 20px 0 20px 40px\n}\n#editor[data-v-3f727cb2] {\n    width: 800px;\n}\n",""])},232:function(e,t,r){"use strict";t.a={name:"add_article",data(){return{oneClass:[],twoClass:[],olddata:[],editer:null,ruleForm:{article_name:"",oneId:"",twoId:"",editer:"",content:"",time:"",daodu:"",recommend:"0",art_show:"0",enname_one:""},rules:{article_name:[{required:!0,message:"请输入文章名称",trigger:"blur"}],oneId:[{required:!0,message:"请选择一级分类",trigger:"blur"}],twoId:[{required:!0,message:"请选择二级分类",trigger:"blur"}],editer:[{required:!0,message:"请输入作者",trigger:"blur"}],times:[{validator:(e,t,r)=>{""===this.timedata?r(new Error("请选择时间")):r()},message:"请选择时间",trigger:"blur"}]}}},created(){this.axios.get("/api/back/article/Class").then(e=>{this.olddata=e.data.data,console.log(e),this.oneClass=e.data.data.oneData,this.ruleForm.oneId=this.oneClass[0].id,this.ruleForm.enname_one=this.oneClass[0].enname,this.selectClassTwo()})},mounted(){this.editor=UE.getEditor("editor"),console.log(this)},methods:{selectClassTwo(){this.twoClass=[],this.olddata.twoData.forEach(function(e){e.parent_id==this.ruleForm.oneId&&this.twoClass.push(e)},this)},changeClassOne(){this.olddata.oneData.forEach(function(e){e.id==this.ruleForm.oneId&&(this.ruleForm.enname_one=e.enname)},this),this.selectClassTwo()},submitForm(e){this.$refs[e].validate(e=>{if(!e||""==this.editor.getContent())return console.log("error submit!!"),!1;this.ruleForm.content=this.editor.getContent(),console.log(this.ruleForm),this.axios.post("/api/back/article/insert",this.ruleForm).then(e=>{"3011"==e.data.code?(this.$message({type:"success",message:"恭喜成功"}),setTimeout(()=>{this.$router.go(0)},1e3)):this.$message({type:"error",message:"添加失败"})})})}},destroyed(){this.editor.destroy()}}},250:function(e,t,r){var o=r(221);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=(0,r(51).default)("0440359c",o,!1,{});o.locals||e.hot.accept(221,function(){var t=r(221);"string"==typeof t&&(t=[[e.i,t,""]]),a(t)}),e.hot.dispose(function(){a()})},251:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return a});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{width:"700px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("h3",[e._v("增加文章")]),e._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"article_name"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.article_name,callback:function(t){e.$set(e.ruleForm,"article_name",t)},expression:"ruleForm.article_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"一级类名",prop:"oneId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeClassOne},model:{value:e.ruleForm.oneId,callback:function(t){e.$set(e.ruleForm,"oneId",t)},expression:"ruleForm.oneId"}},e._l(e.oneClass,function(e){return r("el-option",{key:e.id,attrs:{label:e.cnname,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"二级类名",prop:"twoId"}},[r("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:e.ruleForm.twoId,callback:function(t){e.$set(e.ruleForm,"twoId",t)},expression:"ruleForm.twoId"}},e._l(e.twoClass,function(e){return r("el-option",{key:e.id,attrs:{label:e.cnname,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否显示",prop:"art_show"}},[r("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.ruleForm.art_show,callback:function(t){e.$set(e.ruleForm,"art_show",t)},expression:"ruleForm.art_show"}},[e._v("是")]),e._v(" "),r("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.ruleForm.art_show,callback:function(t){e.$set(e.ruleForm,"art_show",t)},expression:"ruleForm.art_show"}},[e._v("否")])],1),e._v(" "),r("el-form-item",{attrs:{label:"是否推荐",prop:"recommend"}},[r("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("是")]),e._v(" "),r("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.ruleForm.recommend,callback:function(t){e.$set(e.ruleForm,"recommend",t)},expression:"ruleForm.recommend"}},[e._v("否")])],1),e._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"editer"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.editer,callback:function(t){e.$set(e.ruleForm,"editer",t)},expression:"ruleForm.editer"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"导读",prop:""}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",autosize:{minRows:2,maxRows:10}},model:{value:e.ruleForm.daodu,callback:function(t){e.$set(e.ruleForm,"daodu",t)},expression:"ruleForm.daodu"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"时间",prop:"times"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"内容",prop:""}},[r("div",{attrs:{id:"editor"}})]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},a=[];o._withStripped=!0,e.hot.accept(),e.hot.data&&r(17).rerender("data-v-3f727cb2",{render:o,staticRenderFns:a})}});